<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Rescon</title>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
			integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="../../static/index.css" />
		<link rel="stylesheet" href="../../static/form.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="../../static/background-color.js"></script>
	</head>
	<body>
		<div class="wrapper">
			<h1>ResCon</h1>
			<form
				action="/submit"
				method="post"
				enctype="multipart/form-data"
				class="form-content"
				id="fromLinkForm"
			>
				<div class="form-group">
					<label for="file">Upload your resume (must be a .ttx file)</label>
					<input
						type="file"
						class="form-control-file"
						id="file"
						name="file"
						required
					/>
				</div>
				<div class="form-group">
					<label for="apiKey">OpenAI API Key</label>
					<input
						class="form-control"
						type="text"
						id="apiKey"
						name="apiKey"
						required
					/>
				</div>
				<div class="form-group">
					<label for="description">Job Description</label>
					<textarea
						class="form-control"
						id="description"
						name="description"
						required
					>{{ description }}</textarea>
				</div>
				<div class="add-question-wrapper">
					<div class="add-question">
						<label for="questions">Questions</label>
						<img class="add-question-button" src="../../static/Plus.svg" />
					</div>
				</div>
				<button type="submit" class="button">Submit</button>
			</form>
		</div>
		<script>
			$(document).ready(function () {
				var q = "{{ questions }}";
				var delimiter = "{{ _delimit }}";
				var qs = q.split(delimiter)

				var questionCount = 0;

				function addQuestion(questionText) {
					var questionWrapper = $("<div>").addClass(
						"form-group question-wrapper"
					);

					var questionDisplay = $("<div>")
						.text(questionText)
						.addClass("question-display");

					var deleteButton = $("<button>")
						.attr({
							type: "button",
							class: "delete-button",
						})
						.html("&times;");

					deleteButton.on("click", function () {
						questionWrapper.remove();
					});

					questionWrapper.append(questionDisplay, deleteButton);
					$(".add-question").after(questionWrapper);
					questionCount++;
				}

				for (var i = 0; i < qs.length; i++) {
					addQuestion(qs[i]);
				}

				$(".add-question-button").on("click", function () {
					addQuestion("New Question");
				});
			});
		</script>

		<script
			src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
			integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
			integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
			integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
			crossorigin="anonymous"
		></script>
	</body>
</html>
